<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>transformnd API documentation</title>
<meta name="description" content="transformnd …" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Package <code>transformnd</code></h1>
</header>
<section id="section-intro">
<h1 id="transformnd">transformnd</h1>
<p><a href="https://github.com/psf/black"><img alt="Code style: black" src="https://img.shields.io/badge/code%20style-black-000000.svg"></a>
<a href="https://github.com/clbarnes/transformnd/blob/main/LICENSE"><img alt="GitHub" src="https://img.shields.io/github/license/clbarnes/transformnd"></a>
<a href="https://github.com/clbarnes/transformnd/actions/workflows/ci.yaml"><img alt="Test Status" src="https://img.shields.io/github/workflow/status/clbarnes/transformnd/ci"></a>
<a href="https://clbarnes.github.io/transformnd/"><img alt="Docs Status" src="https://img.shields.io/github/workflow/status/clbarnes/transformnd/docs?label=docs"></a></p>
<p>A library providing an API for coordinate transformations,
as well as some common transforms.
The goal is to allow downstream applications which require such transformations
(e.g. image registration) to be generic over anything inheriting from <code><a title="transformnd.Transform" href="#transformnd.Transform">Transform</a></code>.</p>
<p>The base classes and utilities are very lightweight with few dependencies, for use as an API; additional transforms and features use extras.</p>
<p>Heavily inspired by/ cribbed directly from
<a href="https://github.com/schlegelp/navis/tree/master/navis/transforms">Philipp Schlegel's work in navis</a>;
co-developed with <a href="https://github.com/schlegelp/xform/">xform</a> as a red team prototype.</p>
<p><code>N</code> coordinates in <code>D</code> dimensions are given as a numpy array of shape <code>(N, D)</code>.</p>
<p><code><a title="transformnd.Transform" href="#transformnd.Transform">Transform</a></code> subclasses which are restricted to certain dimensionalities
can specify this in their <code>ndim</code> class variable.
Instances of <code><a title="transformnd.Transform" href="#transformnd.Transform">Transform</a></code> subclasses can further restrict their <code>ndim</code>.
Use <code>self._validate_coords(coords)</code> in <code>__call__</code> to ensure the coordinates
are of valid type and dimensions.</p>
<p>Additionally, <code><a title="transformnd" href="#transformnd">transformnd</a></code> provides an interface for transforming types other than NxD numpy arrays,
and implements these adapters for a few common types.</p>
<p>See the <a href="https://github.com/clbarnes/transformnd/blob/main/examples/tutorial.ipynb">tutorial here</a>.</p>
<h2 id="implemented-transforms">Implemented transforms</h2>
<ul>
<li>Identity (<code><a title="transformnd.transforms.Identity" href="transforms/index.html#transformnd.transforms.Identity">Identity</a></code>)</li>
<li>Translation (<code><a title="transformnd.transforms.Translate" href="transforms/index.html#transformnd.transforms.Translate">Translate</a></code>)</li>
<li>Scale (<code><a title="transformnd.transforms.Scale" href="transforms/index.html#transformnd.transforms.Scale">Scale</a></code>)</li>
<li>Reflection (<code><a title="transformnd.transforms.Reflect" href="transforms/index.html#transformnd.transforms.Reflect">Reflect</a></code>)</li>
<li>Affine (<code><a title="transformnd.transforms.Affine" href="transforms/index.html#transformnd.transforms.Affine">Affine</a></code>)<ul>
<li>Can be composed efficiently with <code>@</code> operator</li>
</ul>
</li>
<li>Moving Least Squares, affine (<code><a title="transformnd.transforms.moving_least_squares.MovingLeastSquares" href="transforms/moving_least_squares.html#transformnd.transforms.moving_least_squares.MovingLeastSquares">MovingLeastSquares</a></code>)<ul>
<li>uses <code>movingleastsquares</code> extra</li>
</ul>
</li>
<li>Thin Plate Splines (<code><a title="transformnd.transforms.thinplate.ThinPlateSplines" href="transforms/thinplate.html#transformnd.transforms.thinplate.ThinPlateSplines">ThinPlateSplines</a></code>)<ul>
<li>uses <code>thinplatesplines</code> extra</li>
</ul>
</li>
</ul>
<p>Arbitrary transforms can be composed into a <code><a title="transformnd.TransformSequence" href="#transformnd.TransformSequence">TransformSequence</a></code> with <code>transform1 | transform2</code>.
A graph of transforms between defined spaces can be traversed using the <code>TransformGraph</code>.</p>
<h2 id="implemented-adapters">Implemented adapters</h2>
<ul>
<li>Numpy arrays of shape <code>(&hellip;, D, &hellip;)</code> (<code><a title="transformnd.adapters.ReshapeAdapter" href="adapters/index.html#transformnd.adapters.ReshapeAdapter">ReshapeAdapter</a></code>)</li>
<li><code>meshio.Mesh</code> (<code><a title="transformnd.adapters.meshio.MeshAdapter" href="adapters/meshio.html#transformnd.adapters.meshio.MeshAdapter">MeshAdapter</a></code>)</li>
<li><code>pandas.DataFrame</code> (<code><a title="transformnd.adapters.pandas.DataFrameAdapter" href="adapters/pandas.html#transformnd.adapters.pandas.DataFrameAdapter">DataFrameAdapter</a></code>)<ul>
<li>Takes a subset of columns as a coordinate array</li>
</ul>
</li>
<li>Geometries from <code>shapely</code> (<code><a title="transformnd.adapters.shapely.GeometryAdapter" href="adapters/shapely.html#transformnd.adapters.shapely.GeometryAdapter">GeometryAdapter</a></code>)</li>
<li>Objects composed of transformable attributes (<code><a title="transformnd.adapters.AttrAdapter" href="adapters/index.html#transformnd.adapters.AttrAdapter">AttrAdapter</a></code>).</li>
</ul>
<h2 id="additional-transforms-and-adapters">Additional transforms and adapters</h2>
<p>Contributions of additional transforms and adapters are welcome!
Even if they're only thin wrappers around an external library,
the downstream ecosystem benefits from a consistent API.</p>
<p>Such external transformation libraries should be specified as "extras",
and be contained in a submodule so that they are not immediately imported
with <code><a title="transformnd" href="#transformnd">transformnd</a></code>.
Dependencies for new adapters do not need to be included in <code><a title="transformnd" href="#transformnd">transformnd</a></code>'s dependencies,
but should be specified in the <code>requirements.txt</code> for tests.</p>
<p>Alternatively, consider adopting <code><a title="transformnd" href="#transformnd">transformnd</a></code>'s base classes in your own library,
and have your transformation instantly compatible for downstream users.</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;
.. include:: ../../README.md
&#34;&#34;&#34;
from .base import Transform, TransformSequence, TransformWrapper
from .util import SpaceRef, TransformSignature, check_ndim
from .version import version as __version__  # noqa: F401
from .version import version_tuple as __version_info__  # noqa: F401

__all__ = [
    &#34;Transform&#34;,
    &#34;TransformSequence&#34;,
    &#34;TransformWrapper&#34;,
    &#34;TransformSignature&#34;,
    &#34;SpaceRef&#34;,
    &#34;check_ndim&#34;,
]</code></pre>
</details>
</section>
<section>
<h2 class="section-title" id="header-submodules">Sub-modules</h2>
<dl>
<dt><code class="name"><a title="transformnd.adapters" href="adapters/index.html">transformnd.adapters</a></code></dt>
<dd>
<div class="desc"><p>Adapters for transforming objects which are not well-behaved numpy arrays …</p></div>
</dd>
<dt><code class="name"><a title="transformnd.base" href="base.html">transformnd.base</a></code></dt>
<dd>
<div class="desc"><p>Base classes and wrappers for transforms.</p></div>
</dd>
<dt><code class="name"><a title="transformnd.graph" href="graph.html">transformnd.graph</a></code></dt>
<dd>
<div class="desc"><p>Bridging transforms between known spaces.</p></div>
</dd>
<dt><code class="name"><a title="transformnd.transforms" href="transforms/index.html">transformnd.transforms</a></code></dt>
<dd>
<div class="desc"><p>Implementations of some common transforms.</p></div>
</dd>
<dt><code class="name"><a title="transformnd.util" href="util.html">transformnd.util</a></code></dt>
<dd>
<div class="desc"><p>Utilities used elsewhere in the package.</p></div>
</dd>
<dt><code class="name"><a title="transformnd.version" href="version.html">transformnd.version</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="transformnd.check_ndim"><code class="name flex">
<span>def <span class="ident">check_ndim</span></span>(<span>given_ndim: int, supported_ndim: Optional[Set[int]])</span>
</code></dt>
<dd>
<div class="desc"><p>Raise a ValueError if dimensionality is unsupported.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>given_ndim</code></strong> :&ensp;<code>int</code></dt>
<dd>The dimensionality to check.</dd>
<dt><strong><code>supported_ndim</code></strong> :&ensp;<code>Optional[Set[int]]</code></dt>
<dd>Which dimensions are supported.
If None, the check passes.</dd>
</dl>
<h2 id="raises">Raises</h2>
<dl>
<dt><code>ValueError</code></dt>
<dd>If supported dimensions are defined and given_ndim is not in them.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def check_ndim(given_ndim: int, supported_ndim: Optional[Set[int]]):
    &#34;&#34;&#34;Raise a ValueError if dimensionality is unsupported.

    Parameters
    ----------
    given_ndim : int
        The dimensionality to check.
    supported_ndim : Optional[Set[int]]
        Which dimensions are supported.
        If None, the check passes.

    Raises
    ------
    ValueError
        If supported dimensions are defined and given_ndim is not in them.
    &#34;&#34;&#34;
    if supported_ndim is not None and given_ndim not in supported_ndim:
        raise ValueError(
            f&#34;Transform supported for {format_dims(supported_ndim)}, not {given_ndim}&#34;
        )</code></pre>
</details>
</dd>
</dl>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="transformnd.Transform"><code class="flex name class">
<span>class <span class="ident">Transform</span></span>
<span>(</span><span>*, spaces: SpaceTuple = (None, None))</span>
</code></dt>
<dd>
<div class="desc"><p>Helper class that provides a standard way to create an ABC using
inheritance.</p>
<p>Base class for transformations.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>spaces</code></strong> :&ensp;<code>tuple[SpaceRef, SpaceRef]</code></dt>
<dd>Optional source and target spaces</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Transform(ABC):
    ndim: Optional[Set[int]] = None

    def __init__(
        self,
        *,
        spaces: SpaceTuple = (None, None),
    ):
        &#34;&#34;&#34;Base class for transformations.

        Parameters
        ----------
        spaces : tuple[SpaceRef, SpaceRef]
            Optional source and target spaces
        &#34;&#34;&#34;
        self.spaces = spaces

    @property
    def source_space(self):
        return self.spaces[0]

    @property
    def target_space(self):
        return self.spaces[1]

    def _validate_coords(self, coords) -&gt; np.ndarray:
        &#34;&#34;&#34;Check that dimension of coords are supported.

        Also ensure that coords is a 2D numpy array.

        Parameters
        ----------
        coords : np.ndarray
            NxD array of N D-dimensional coordinates.

        Raises
        ------
        ValueError
            If dimensions are not supported.
        &#34;&#34;&#34;
        coords = np.asarray(coords)
        if coords.ndim != 2:
            raise ValueError(&#34;Coords must be a 2D array&#34;)
        check_ndim(coords.shape[1], self.ndim)
        return coords

    @abstractmethod
    def apply(self, coords: np.ndarray) -&gt; np.ndarray:
        &#34;&#34;&#34;Apply transformation.

        Parameters
        ----------
        coords : np.ndarray
            NxD array of N D-dimensional coordinates.

        Returns
        -------
        np.ndarray
            Transformed coordinates in the same shape.
        &#34;&#34;&#34;
        pass

    def __invert__(self) -&gt; Transform:
        &#34;&#34;&#34;Invert transformation if possible.

        Returns
        -------
        Transform
            Inverted transformation.
        &#34;&#34;&#34;
        return NotImplemented

    def __or__(self, other) -&gt; TransformSequence:
        &#34;&#34;&#34;Compose transformations into a sequence.

        If other is a TransformSequence, prepend this transform to the others.

        Parameters
        ----------
        other : Transform

        Returns
        -------
        TransformSequence
        &#34;&#34;&#34;
        if not isinstance(other, Transform):
            return NotImplemented
        transforms = get_transform_list(self) + get_transform_list(other)
        return TransformSequence(
            transforms,
            spaces=(self.source_space, other.target_space),
        )

    def __ror__(self, other) -&gt; TransformSequence:
        &#34;&#34;&#34;Compose transformations into a sequence.

        If other is a TransformSequence, append this transform to the others.

        Parameters
        ----------
        other : Transform

        Returns
        -------
        TransformSequence
        &#34;&#34;&#34;
        if not isinstance(other, Transform):
            return NotImplemented
        transforms = get_transform_list(other) + get_transform_list(self)
        return TransformSequence(
            transforms,
            spaces=(other.source_space, self.target_space),
        )

    def __str__(self) -&gt; str:
        cls_name = type(self).__name__
        src = space_str(self.source_space)
        tgt = space_str(self.target_space)
        return f&#34;{cls_name}[{src}-&gt;{tgt}]&#34;</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>abc.ABC</li>
</ul>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="transformnd.base.TransformSequence" href="base.html#transformnd.base.TransformSequence">TransformSequence</a></li>
<li><a title="transformnd.base.TransformWrapper" href="base.html#transformnd.base.TransformWrapper">TransformWrapper</a></li>
<li><a title="transformnd.transforms.affine.Affine" href="transforms/affine.html#transformnd.transforms.affine.Affine">Affine</a></li>
<li><a title="transformnd.transforms.moving_least_squares.MovingLeastSquares" href="transforms/moving_least_squares.html#transformnd.transforms.moving_least_squares.MovingLeastSquares">MovingLeastSquares</a></li>
<li><a title="transformnd.transforms.reflection.Reflect" href="transforms/reflection.html#transformnd.transforms.reflection.Reflect">Reflect</a></li>
<li><a title="transformnd.transforms.simple.Identity" href="transforms/simple.html#transformnd.transforms.simple.Identity">Identity</a></li>
<li><a title="transformnd.transforms.simple.Scale" href="transforms/simple.html#transformnd.transforms.simple.Scale">Scale</a></li>
<li><a title="transformnd.transforms.simple.Translate" href="transforms/simple.html#transformnd.transforms.simple.Translate">Translate</a></li>
<li><a title="transformnd.transforms.thinplate.ThinPlateSplines" href="transforms/thinplate.html#transformnd.transforms.thinplate.ThinPlateSplines">ThinPlateSplines</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="transformnd.Transform.ndim"><code class="name">var <span class="ident">ndim</span> : Optional[Set[int]]</code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Instance variables</h3>
<dl>
<dt id="transformnd.Transform.source_space"><code class="name">var <span class="ident">source_space</span></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def source_space(self):
    return self.spaces[0]</code></pre>
</details>
</dd>
<dt id="transformnd.Transform.target_space"><code class="name">var <span class="ident">target_space</span></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def target_space(self):
    return self.spaces[1]</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="transformnd.Transform.apply"><code class="name flex">
<span>def <span class="ident">apply</span></span>(<span>self, coords: np.ndarray) ‑> numpy.ndarray</span>
</code></dt>
<dd>
<div class="desc"><p>Apply transformation.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>coords</code></strong> :&ensp;<code>np.ndarray</code></dt>
<dd>NxD array of N D-dimensional coordinates.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>np.ndarray</code></dt>
<dd>Transformed coordinates in the same shape.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@abstractmethod
def apply(self, coords: np.ndarray) -&gt; np.ndarray:
    &#34;&#34;&#34;Apply transformation.

    Parameters
    ----------
    coords : np.ndarray
        NxD array of N D-dimensional coordinates.

    Returns
    -------
    np.ndarray
        Transformed coordinates in the same shape.
    &#34;&#34;&#34;
    pass</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="transformnd.TransformSequence"><code class="flex name class">
<span>class <span class="ident">TransformSequence</span></span>
<span>(</span><span>transforms: Sequence[<a title="transformnd.Transform" href="#transformnd.Transform">Transform</a>], *, spaces: SpaceTuple = (None, None))</span>
</code></dt>
<dd>
<div class="desc"><p>Helper class that provides a standard way to create an ABC using
inheritance.</p>
<p>Combine transforms by chaining them.</p>
<p>Also checks for consistent dimensionality and space references,
inferring if None.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>transforms</code></strong> :&ensp;<code>List[<a title="transformnd.Transform" href="#transformnd.Transform">Transform</a>]</code></dt>
<dd>Items which are a TransformSequences
will each still be treated as a single transform.</dd>
<dt><strong><code>spaces</code></strong> :&ensp;<code>tuple[SpaceRef, SpaceRef]</code></dt>
<dd>Optional source and target spaces.
Can also be inferred from the first and last transforms.</dd>
</dl>
<h2 id="raises">Raises</h2>
<dl>
<dt><code>ValueError</code></dt>
<dd>If spaces are incompatible.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class TransformSequence(Transform, Sequence[Transform]):
    def __init__(
        self,
        transforms: Sequence[Transform],
        *,
        spaces: SpaceTuple = (None, None),
    ) -&gt; None:
        &#34;&#34;&#34;Combine transforms by chaining them.

        Also checks for consistent dimensionality and space references,
        inferring if None.

        Parameters
        ----------
        transforms : List[Transform]
            Items which are a TransformSequences
            will each still be treated as a single transform.
        spaces : tuple[SpaceRef, SpaceRef]
            Optional source and target spaces.
            Can also be inferred from the first and last transforms.

        Raises
        ------
        ValueError
            If spaces are incompatible.
        &#34;&#34;&#34;
        ts = infer_spaces(transforms, *spaces)

        super().__init__(
            spaces=(
                ts[0].source_space,
                ts[-1].target_space,
            ),
        )

        self.transforms: List[Transform] = ts

        self.ndim = None
        for t in self.transforms:
            self.ndim = dim_intersection(self.ndim, t.ndim)

        if self.ndim is not None and len(self.ndim) == 0:
            raise ValueError(&#34;Transforms have incompatible dimensionalities&#34;)

    def __iter__(self) -&gt; Iterator[Transform]:
        &#34;&#34;&#34;Iterate through component transforms.

        Yields
        -------
        Transform
        &#34;&#34;&#34;
        yield from self.transforms

    def __len__(self) -&gt; int:
        &#34;&#34;&#34;Number of transforms.

        Returns
        -------
        int
        &#34;&#34;&#34;
        return len(self.transforms)

    def __invert__(self) -&gt; Transform:
        try:
            transforms = [~t for t in reversed(self.transforms)]
        except NotImplementedError:
            return NotImplemented
        return type(self)(
            transforms,
            spaces=self.spaces[::-1],
        )

    def apply(self, coords: np.ndarray) -&gt; np.ndarray:
        for t in self.transforms:
            coords = t.apply(coords)
        return coords

    def list_spaces(self, skip_none=False) -&gt; List[SpaceRef]:
        &#34;&#34;&#34;List spaces in this transform.

        Parameters
        ----------
        skip_none : bool, optional
            Whether to skip undefined spaces, default False.

        Returns
        -------
        List[SpaceRef]
        &#34;&#34;&#34;
        spaces = [self.source_space] + [t.target_space for t in self.transforms]
        if skip_none:
            spaces = [s for s in spaces if s is not None]
        return spaces

    def __str__(self) -&gt; str:
        cls_name = type(self).__name__
        spaces_str = &#34;-&gt;&#34;.join(space_str(s) for s in self.list_spaces())
        return f&#34;{cls_name}[{spaces_str}]&#34;

    def __getitem__(self, idx: Union[slice, int]):
        if isinstance(idx, int):
            return self.transforms[idx]
        return type(self)(self.transforms[idx])</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="transformnd.base.Transform" href="base.html#transformnd.base.Transform">Transform</a></li>
<li>abc.ABC</li>
<li>collections.abc.Sequence</li>
<li>collections.abc.Reversible</li>
<li>collections.abc.Collection</li>
<li>collections.abc.Sized</li>
<li>collections.abc.Iterable</li>
<li>collections.abc.Container</li>
<li>typing.Generic</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="transformnd.TransformSequence.list_spaces"><code class="name flex">
<span>def <span class="ident">list_spaces</span></span>(<span>self, skip_none=False) ‑> List[Hashable]</span>
</code></dt>
<dd>
<div class="desc"><p>List spaces in this transform.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>skip_none</code></strong> :&ensp;<code>bool</code>, optional</dt>
<dd>Whether to skip undefined spaces, default False.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>List[SpaceRef]</code></dt>
<dd>&nbsp;</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def list_spaces(self, skip_none=False) -&gt; List[SpaceRef]:
    &#34;&#34;&#34;List spaces in this transform.

    Parameters
    ----------
    skip_none : bool, optional
        Whether to skip undefined spaces, default False.

    Returns
    -------
    List[SpaceRef]
    &#34;&#34;&#34;
    spaces = [self.source_space] + [t.target_space for t in self.transforms]
    if skip_none:
        spaces = [s for s in spaces if s is not None]
    return spaces</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="transformnd.base.Transform" href="base.html#transformnd.base.Transform">Transform</a></b></code>:
<ul class="hlist">
<li><code><a title="transformnd.base.Transform.apply" href="base.html#transformnd.base.Transform.apply">apply</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="transformnd.TransformWrapper"><code class="flex name class">
<span>class <span class="ident">TransformWrapper</span></span>
<span>(</span><span>fn: TransformSignature, ndim: Optional[Union[Set[int], int]] = None, *, spaces: SpaceTuple = (None, None))</span>
</code></dt>
<dd>
<div class="desc"><p>Helper class that provides a standard way to create an ABC using
inheritance.</p>
<p>Wrapper around an arbitrary function.</p>
<p>Callable should take and return an identically-shaped
NxD numpy array of N D-dimensional coordinates.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>fn</code></strong> :&ensp;<code>TransformSignature</code></dt>
<dd>Callable.</dd>
<dt><strong><code>spaces</code></strong> :&ensp;<code>tuple[SpaceRef, SpaceRef]</code></dt>
<dd>Optional source and target spaces</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class TransformWrapper(Transform):
    def __init__(
        self,
        fn: TransformSignature,
        ndim: Optional[Union[Set[int], int]] = None,
        *,
        spaces: SpaceTuple = (None, None),
    ):
        &#34;&#34;&#34;Wrapper around an arbitrary function.

        Callable should take and return an identically-shaped
        NxD numpy array of N D-dimensional coordinates.

        Parameters
        ----------
        fn : TransformSignature
            Callable.
        spaces : tuple[SpaceRef, SpaceRef]
            Optional source and target spaces
        &#34;&#34;&#34;
        super().__init__(spaces=spaces)
        self.fn = fn
        if ndim is not None:
            if isinstance(ndim, int):
                self.ndim = {ndim}
            else:
                self.ndim = set(ndim)

    def apply(self, coords: np.ndarray) -&gt; np.ndarray:
        self._validate_coords(coords)
        return self.fn(coords)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="transformnd.base.Transform" href="base.html#transformnd.base.Transform">Transform</a></li>
<li>abc.ABC</li>
</ul>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="transformnd.base.Transform" href="base.html#transformnd.base.Transform">Transform</a></b></code>:
<ul class="hlist">
<li><code><a title="transformnd.base.Transform.apply" href="base.html#transformnd.base.Transform.apply">apply</a></code></li>
</ul>
</li>
</ul>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul>
<li><a href="#transformnd">transformnd</a><ul>
<li><a href="#implemented-transforms">Implemented transforms</a></li>
<li><a href="#implemented-adapters">Implemented adapters</a></li>
<li><a href="#additional-transforms-and-adapters">Additional transforms and adapters</a></li>
</ul>
</li>
</ul>
</div>
<ul id="index">
<li><h3><a href="#header-submodules">Sub-modules</a></h3>
<ul>
<li><code><a title="transformnd.adapters" href="adapters/index.html">transformnd.adapters</a></code></li>
<li><code><a title="transformnd.base" href="base.html">transformnd.base</a></code></li>
<li><code><a title="transformnd.graph" href="graph.html">transformnd.graph</a></code></li>
<li><code><a title="transformnd.transforms" href="transforms/index.html">transformnd.transforms</a></code></li>
<li><code><a title="transformnd.util" href="util.html">transformnd.util</a></code></li>
<li><code><a title="transformnd.version" href="version.html">transformnd.version</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="transformnd.check_ndim" href="#transformnd.check_ndim">check_ndim</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="transformnd.Transform" href="#transformnd.Transform">Transform</a></code></h4>
<ul class="">
<li><code><a title="transformnd.Transform.apply" href="#transformnd.Transform.apply">apply</a></code></li>
<li><code><a title="transformnd.Transform.ndim" href="#transformnd.Transform.ndim">ndim</a></code></li>
<li><code><a title="transformnd.Transform.source_space" href="#transformnd.Transform.source_space">source_space</a></code></li>
<li><code><a title="transformnd.Transform.target_space" href="#transformnd.Transform.target_space">target_space</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="transformnd.TransformSequence" href="#transformnd.TransformSequence">TransformSequence</a></code></h4>
<ul class="">
<li><code><a title="transformnd.TransformSequence.list_spaces" href="#transformnd.TransformSequence.list_spaces">list_spaces</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="transformnd.TransformWrapper" href="#transformnd.TransformWrapper">TransformWrapper</a></code></h4>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>